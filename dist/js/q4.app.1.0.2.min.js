/*!
Project:  q4-blank_template
Name:     q4.app.js
Version:  1.0.2
Compiled: 2018-02-05
*/
var q4Defaults={options:{scrollSpeed:1e3,headerOffset:0,mailingListSignupCls:".module-subscribe--fancy",errorMessage:"The following errors must be corrected",requiredText:"is required",invalidText:"is invalid",captchaValidationText:"Code",provideCodeText:"Please provide the code",errorTpl:'<p class="module_message module_message--error">{{errorMessage}}</p><ul>{{#errors}}<li>{{name}} {{message}}</li>{{/errors}}</ul>',mailingListConfig:{tpl:'<div id="SubscriberConfirmation" class="module module-subscribe module-subscribe--fancy dark grid_col grid_col--3-of-6 grid_col--md-1-of-2"><div class="module_container--outer"><h2 class="module_title">Email Alerts</h2><div class="module_container--inner"><p class="module_message module_message--success"></p></div></div></div>',location:".pane--footer",submitText:"Submit"},superfish:!0},isMobile:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}},init:function(){},cleanUp:function(){$("#lnkPostback").remove(),$("#litPageDiv > a:first").remove()},resetDate:function(a){"0"===GetViewType()&&$(a.join()).each(function(){$(this).attr("href",$(this).attr("href")+"&ResetDate=1")})},previewToolbar:function(){"0"===GetViewType()&&$(".PreviewToolBar").prepend('<div class="PreviewTrigger"><i class="q4-icon_clock-line"></i></div>').on("click",".PreviewTrigger",function(){$(this).toggleClass("js--active").parent().toggleClass("js--open")})},unWrapLink:function(a){$(a).replaceWith(function(){return $('<span class="'+a.split(".").pop()+'">'+$(this).html()+"</span>")})},reveal:function(a,b,c,d){$(b).attr("tabindex","0"),$(c).attr("aria-hidden","true"),d?$(a).one("click keypress",b,function(d){(13==d.keyCode||"click"==d.type)&&($(b).is("a")&&d.preventDefault(),$(this).toggleClass("js--active").closest(a).find(c).toggleClass("js--revealed"),$(c).attr("aria-hidden",function(a,b){return"true"==b?"false":"true"}))}):$(a).on("click keypress",b,function(d){(13==d.keyCode||"click"==d.type)&&($(b).is("a")&&d.preventDefault(),$(this).toggleClass("js--active").closest(a).find(c).toggleClass("js--revealed"),$(c).attr("aria-hidden",function(a,b){return"true"==b?"false":"true"}))})},cleanQuickLinks:function(a){a.find("ul").attr("class","module-links_list")},scrollTo:function(a,b){var c=void 0===b||isNaN(b)?this.options.scrollSpeed:b;a.length&&(history&&(history.scrollRestoration="manual"),$("html, body").animate({scrollTop:a.eq(0).offset().top-this.options.headerOffset},c))},isValidEmailAddress:function(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/;return b.test(a)},validateUnsubscribe:function(a){var b=this;a.find('input[type="submit"]').on("click",function(c){var d=a.find('input[id*="Email"]').val();b.isValidEmailAddress(d)||(a.find(".module_confirmation-container").html(Mustache.render(b.options.errorTpl,{errors:[{message:d.length?b.options.invalidText:b.options.requiredText,name:"Email Address"}],errorMessage:b.options.errorMessage})).show(),b.scrollTo(a.find(".module_error-container"),0),a.addClass("js--invalid"),c.preventDefault())}),a.find(".module_confirmation-container").text().trim().length&&($(".module-subscribe").addClass("js--hidden"),a.find(".module_introduction, .module-unsubscribe_table, .module_actions").addClass("js--hidden"),b.scrollTo(a))},validateSubmit:function(a){var b=$(a);b.on("click","input:submit",function(b){return $(this).closest(a).find("input:text").val().length?void 0:(b.preventDefault(),!1)})},submitOnEnter:function(a){$(a).find('input[type="text"]').removeAttr("onkeypress").on("keydown",function(b){return 13==b.keyCode?(b.preventDefault(),$(this).closest(a).find('input[type="submit"]').trigger("click"),!1):void 0})},_onMobileMenuExpand:function(a){a.on("click","li.has-children > a",function(a){var b=$(this),c=b.parent();c.hasClass("js--expanded")||(a.preventDefault(),c.siblings().removeClass("js--expanded"),c.addClass("js--expanded"))})},superfish:function(a,b){!this.isMobile.any()&&this.options.superfish&&a.superfish(b)},mobileMenuToggle:function(a,b,c){var d=this;a.on("click",c,function(c){a.toggleClass("js--mobile"),d._onMobileMenuExpand($(".js--mobile "+b+" .nav"))})},accessibleNav:function(a,b){a.on("focus ","a",function(a){var c=$(this);c.closest("ul").find("li").removeClass("js--focused"),c.closest("li").addClass("js--focused"),c.closest("li").is(":last-child")&&c.closest("ul").is(b)&&c.blur(function(){c.closest(b).find("li").removeClass("js--focused")})})},accessibilize:function(a,b,c){a.attr("role","tablist"),b.attr("tabindex","0").attr("role","tab").attr("aria-expanded","false"),c.attr("role","tabpanel").addClass("js--hidden")},toggle:function(a,b,c,d,e,f,g){var h=this,i=a.find(b);h.accessibilize(a,a.find(c),a.find(d)),i.on("click keypress",c,function(g){g.preventDefault(),(13==g.which||"click"==g.type)&&(e?h._accordionTrigger($(this),a,b,c,d):h._toggleTrigger($(this),a,b,d),f&&(a.find(b+".js--active").length||a.find(".toggle-all").removeClass("js--active"),a.find(b+".js--active").length===a.find(b).length&&a.find(".toggle-all").addClass("js--active")))}),f&&h._toggleAll(a,b,c,d),g&&(i.first().find(c).attr("aria-expanded",!0),i.first().addClass("js--active").find(d).removeClass("js--hidden"))},_toggleAll:function(a,b,c,d){a.prepend('<div class="toggle-all"><a description="toggle all items" class="button" href="#all"></a></div>').on("click",".toggle-all a",function(e){e.preventDefault(),$(this).parent().toggleClass("js--active"),$(this).parent().is(".js--active")?(a.find(c).attr("aria-expanded","true"),a.find(b).addClass("js--active"),a.find(d).slideDown(400,function(){$(this).removeClass("js--hidden")})):(a.find(c).attr("aria-expanded","false"),a.find(b).removeClass("js--active"),a.find(d).slideUp(400,function(){$(this).addClass("js--hidden")}))})},_accordionTrigger:function(a,b,c,d,e){a.closest(c).hasClass("js--active")||($(c).removeClass("js--active"),b.find(d).attr("aria-expanded",!1),b.find(e).slideUp(400,function(){$(this).addClass("js--hidden")}),a.attr("aria-expanded",!0),a.closest(c).addClass("js--active").find(e).slideDown(400,function(){$(this).removeClass("js--hidden")}))},_toggleTrigger:function(a,b,c,d){var e=b.find(".accordion-toggle-all");a.attr("aria-expanded",function(a,b){return"true"==b?"false":"true"}).closest(c).toggleClass("js--active").find(d).slideToggle(400,function(){$(this).toggleClass("js--hidden")}),b.find(c).not(".js--active").length?e.removeClass("js--active"):e.addClass("js--active")},remindMeOnce:function(a){a.each(function(){$(this).find(".module_reminder-success").text().length&&$(this).find(".module_reminder").addClass("js--reminded")})},addToCalendar:function(a){$(a).on("click keypress",".module_add-to-calendar-reveal",function(a){(13==a.keyCode||"click"==a.type)&&$.fancybox.open({src:$(this).next(),type:"inline",opts:{slideClass:"fancybox-slide--no-padding"}})})},hidePastCal:function(a){var b=new Date;a.each(function(){var a=$(this),c=a.find(".module_date-text");if(c.text().indexOf("from")>=0){var d=c.text().split("from ").pop().split("to ");b>new Date(d[1])&&a.find(".module_add-to-calendar").addClass("js--hidden")}else b>new Date(c.text())&&a.find(".module_add-to-calendar").addClass("js--hidden")})},fancySignup:function(){var a=this,b=!0,c=a.options.mailingListSignupCls,d=$(c),e='div[id*="SubscriberConfirmation"]',f=$('div[id*="SubscriberConfirmation"]'),g=a.options.mailingListConfig.location+" "+e+" .module_message--success",h=$(g);if(f.is(":visible")){if(f.filter(":visible").closest(a.options.mailingListConfig.location).length){var i=f.filter(":visible").closest(a.options.mailingListConfig.location).find(".module_message--success").text();f.filter(":visible").parent().html(a.options.mailingListConfig.tpl).find(".module_message--success").html(i)}a.scrollTo($('div[id*="SubscriberConfirmation"]').filter(":visible"),0),h.length||$(".module-unsubscribe").addClass("js--hidden")}d.length&&d.each(function(){var d=$(this);d.find("input.module_input").length&&d.find("input.module_input").val().length&&a.scrollTo(d,0),d.find(".CaptchaContainer").addClass("js--hidden"),d.find("img").attr("alt","Captcha"),d.find('input[type="text"]').attr("aria-label","Captcha Text"),d.find("table").removeAttr("cellpadding cellspacing border width"),d.find('input[type="submit"]').removeAttr("onclick").appendTo(d.find(".CaptchaContainer")),d.find(".module_actions").append('<input type="submit" value="'+a.options.mailingListConfig.submitText+'" class="button module-subscribe_submit-button module-subscribe_submit-button--fancy">'),d.on("click",".module-subscribe_submit-button--fancy",function(e){e.preventDefault(),b=!1;var f=$(this).closest(c),g=a._mailingListValidation(f);return g.length?a.scrollTo(d.find(".module_error-container"),0):(f.find(".CaptchaContainer").data("container",f.attr("id")),$.fancybox.open({src:f.find(".CaptchaContainer"),type:"inline",opts:{onComplete:function(){$(".fancybox-container").appendTo($("#litPageDiv form:first"))}}})),!1}),d.find("input, select").on("change",function(){b||a._mailingListValidation(d)}),d.find('.CaptchaContainer input[type="text"]').on("keydown",function(a){return 13==a.keyCode?(a.preventDefault(),$(this).closest(".CaptchaContainer").find('input[type="submit"]').trigger("click"),!1):void 0}),d.find(".CaptchaContainer").prepend('<div class="module_error-container"></div>').find('input[type="submit"]').on("click",function(b){var c=$(this).closest(".CaptchaContainer");c.find('input[type="text"]').val().length?6!==c.find('input[type="text"]').val().length&&(b.preventDefault(),c.find(".module_error-container").html(a.options.captchaValidationText+" "+a.options.invalidText)):(b.preventDefault(),c.find(".module_error-container").html(a.options.captchaValidationText+" "+a.options.requiredText))}),d.find('input[type="text"]').on("keydown",function(a){return 13==a.keyCode?(a.preventDefault(),$(this).closest(c).find('.module_actions input[type="submit"]').trigger("click"),!1):void 0})})},_mailingListValidation:function(a){var b=this,c=[];return a.find(".js--invalid").removeClass("js--invalid"),a.find(".module_required").each(function(){var a=$(this).closest(".module-subscribe_table-input"),d=b.options.requiredText,e=a.find("label:first").text(),f=!0;a.find("input").length?a.hasClass("module-subscribe_email")?a.find("input").val().length?b.isValidEmailAddress(a.find("input").val())||(f=!1,d=b.options.invalidText):f=!1:a.find("input").val().length||(f=!1):a.find("select").length?a.find("select option:selected").index()||(f=!1):a.closest("table").find('input[type="checkbox"]:checked').length||(a=a.next(),f=!1),f||(a.addClass("js--invalid"),c.push({name:e,message:d}))}),c.length?a.find(".module_error-container").html(Mustache.render(b.options.errorTpl,{errors:c,errorMessage:b.options.errorMessage})).show():a.find(".module_error-container").html(""),c},copyright:function(a){a.html((new Date).getFullYear())},docTracking:function(){var a,b,c,d,e,f,g,h;window.hasOwnProperty=window.hasOwnProperty||Object.prototype.hasOwnProperty,e="",a=/\.(zip|exe|dmg|pdf|doc.*|xls.*|ppt.*|mp3|mp4|txt|rar|html|wma|mov|avi|wmv|flv|wav)(\?.*)?$/i,b=/^https?:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i,d=/^https?\:\/\//i,c=/.*\.cloudfront\.net$/i,g=window.location.href.match(b),h=g.length>0?g[1]:!1,f=$("base"),f.length>0&&void 0!==f.attr("href")&&(e=f.attr("href")),$("body").on("click","a",function(f){var g,i,j,k,l,m,n;if(g=$(this),j=g.attr("href")||"",!j.match(/^javascript:/i)){if(k=j.match(b),l=null!==k?k[1]:h,m=l===h||c.test(l)||l.toLowerCase().indexOf("q4cdn")>-1,i={value:0,non_i:!1,action:"click",loc:j},j.match(/^mailto\:/i))i.category="email",i.label=j.replace(/^mailto\:/i,"");else if(j.match()&&!m)i.category="external",i.label=j.replace(d,""),i.non_i=!0;else if(null!==(n=j.match(a)))i.category="download",i.action="download",i.label=j.replace(/ /g,"-").replace(d,""),i.loc=(c.test(l)?"":e)+j;else{if(!j.match(/^tel\:/i))return;i.category="telephone",i.action="click",i.label=j.replace(/^tel\:/i,"")}window.ga("send","event",i.category,i.action,i.label.toLowerCase(),i.value,{nonInteraction:i.non_i}),window.ga("Client.send","event",i.category,i.action,i.label.toLowerCase(),i.value,{nonInteraction:i.non_i})}})}};